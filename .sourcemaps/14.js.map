{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAWlC;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAT1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;SAEF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACboC;AACA;AACuC;AAG7B;AAiBzE;IASE,kBAAmB,OAAsB,EAAU,WAAwB,EAAS,kBAAsC;QAAvG,YAAO,GAAP,OAAO,CAAe;QAAU,gBAAW,GAAX,WAAW,CAAa;QAAS,uBAAkB,GAAlB,kBAAkB,CAAoB;QACxH,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAE,CAAC;IACjE,CAAC;IAED,iCAAc,GAAd;QACE,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,kCAAe,GAAf;QAAA,iBAWC;QAVC,IAAI,CAAC,OAAO,GAAG;YACb,kBAAkB,EAAE,KAAK;SAC1B,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,GAAgB;YACtE,KAAI,CAAC,UAAU,GAAG,GAAG,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACzD,CAAC,EAAE,UAAC,GAAkB;YACpB,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yBAAM,GAAN,UAAO,GAAG,EAAE,IAAI;QAAhB,iBAqBC;QAnBC,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAE/C,IAAI,UAAU,GAAG;YACf,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,EAAE;YACR,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;SACzC;QAED,IAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;QAE1E,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,OAAmB;YACnD,KAAI,CAAC,MAAM,GAAG,OAAO,CAAC;YACtB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACxC,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YAChC,CAAC;QACH,CAAC,EAAE,UAAC,MAAM,IAAK,cAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAnB,CAAmB,CAAC,CAAC;QAEpC,IAAI,CAAC,SAAS,EAAE,CAAC;IAEnB,CAAC;IAED,4BAAS,GAAT;QAAA,iBAiBC;QAfC,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAClC,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;YACrC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;SAC/B,CAAC,CAAC;QAEH,IAAI,OAAO,GAAG,uCAAuC,CAAC;QACtD,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAC1C,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;QAEH,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE;YAC7C,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,gCAAa,GAAb,UAAc,IAAY,EAAE,MAAc;QACzC,YAAY;QAEX,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACtD,aAAa;QACX,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,IAAI,EAAC,MAAM,CAAC,CAAC;IAClD,CAAC;IAED,iCAAc,GAAd,UAAe,MAAM;QACnB,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QAC9C,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC7D,IAAI,OAAO,GAAG;YACZ,QAAQ,EAAE,MAAM;YAChB,MAAM,EAAE,IAAI;YACZ,KAAK,EAAE,CAAC,YAAY,CAAC;SACtB,CAAC;QACF,IAAI,MAAM,GAAC,IAAI,CAAC;QAChB,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACjC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,UAAU,OAAO,EAAE,MAAM;gBACrD,EAAE,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC,CAAC;oBACzD,OAAO,CAAC,OAAO,CAAC,CAAC;oBACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACxC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACzD,+BAA+B;oBAEjC,CAAC;gBAGH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,MAAM,CAAC,CAAC;gBACjB,CAAC;YAEH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IAEL,CAAC;IAGD,+BAAY,GAAZ,UAAa,KAAK;QAChB,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAClC,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;YACrC,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ;SAClC,CAAC,CAAC;IACL,CAAC;IAhHiB;QAAjB,yEAAS,CAAC,KAAK,CAAC;kCAAa,iEAAU;gDAAC;IAJ9B,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;iBAU0H;OAT/G,QAAQ,CAuHpB;IAAD,CAAC;AAAA;SAvHY,QAAQ,e","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n  ],\n\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import {Component, ViewChild, ElementRef} from '@angular/core';\nimport {IonicPage, List, NavController, NavParams} from 'ionic-angular';\nimport {Geolocation, GeolocationOptions, Geoposition, PositionError} from '@ionic-native/geolocation';\nimport {Position} from '@angular/compiler';\nimport {NgModule} from '@angular/core/src/metadata/ng_module';\nimport {RestaurantProvider} from \"../../providers/restaurant/restaurant\";\n\n\n/**\n * Generated class for the HomePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\ndeclare var google: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage {\n  options: GeolocationOptions;\n  currentPos: Geoposition;\n  places: Array<any>;\n  @ViewChild('map') mapElement: ElementRef;\n  map: any;\n  private restaurantList: any;\n\n\n  constructor(public navCtrl: NavController, private geolocation: Geolocation, public restaurantProvider: RestaurantProvider) {\n    this.restaurantList = this.restaurantProvider.getRestaurants();\n  }\n\n  ionViewDidLoad() {\n    this.getUserPosition();\n  }\n\n  getUserPosition() {\n    this.options = {\n      enableHighAccuracy: false\n    };\n    this.geolocation.getCurrentPosition(this.options).then((pos: Geoposition) => {\n      this.currentPos = pos;\n      console.log(pos);\n      this.addMap(pos.coords.latitude, pos.coords.longitude);\n    }, (err: PositionError) => {\n      console.log(\"Error : \" + err.message);\n    });\n  }\n\n  addMap(lat, long) {\n\n    let latLng = new google.maps.LatLng(lat, long);\n\n    let mapOptions = {\n      center: latLng,\n      zoom: 15,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    }\n\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n\n    this.getRestaurants(latLng).then((results: Array<any>) => {\n      this.places = results;\n      for (let i = 0; i < results.length; i++) {\n        this.createMarker(results[i]);\n      }\n    }, (status) => console.log(status));\n\n    this.addMarker();\n\n  }\n\n  addMarker() {\n\n    let marker = new google.maps.Marker({\n      map: this.map,\n      animation: google.maps.Animation.DROP,\n      position: this.map.getCenter()\n    });\n\n    let content = \"<p>C'est votre position actuelle!</p>\";\n    let infoWindow = new google.maps.InfoWindow({\n      content: content\n    });\n\n    google.maps.event.addListener(marker, 'click', () => {\n      infoWindow.open(this.map, marker);\n    });\n\n  }\n\n  addRestaurant(name: string, rating: number) {\n   // debugger;\n\n    console.log(\"********\\t\" + this.restaurantProvider);\n  //  debugger;\n    this.restaurantProvider.addRestaus(name,rating);\n  }\n\n  getRestaurants(latLng) {\n    var infowindow = new google.maps.InfoWindow();\n    var service = new google.maps.places.PlacesService(this.map);\n    let request = {\n      location: latLng,\n      radius: 3000,\n      types: [\"restaurant\"]\n    };\n    let __this=this;\n    return new Promise((resolve, reject) => {\n      service.nearbySearch(request, function (results, status) {\n        if (status === google.maps.places.PlacesServiceStatus.OK) {\n          resolve(results);\n          for (var i = 0; i < results.length; i++) {\n            __this.addRestaurant(results[i].name, results[i].rating);\n            //console.log(results[i].name);\n\n          }\n\n\n        } else {\n          reject(status);\n        }\n\n      });\n    });\n\n  }\n\n\n  createMarker(place) {\n    let marker = new google.maps.Marker({\n      map: this.map,\n      animation: google.maps.Animation.DROP,\n      position: place.geometry.location\n    });\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}
